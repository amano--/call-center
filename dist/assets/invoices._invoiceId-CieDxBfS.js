import{k as i,c as m,l as p,m as h,r as d,j as e,L as v}from"./index-BQC43ji0.js";import{u as x}from"./useSuspenseQuery-DaXERWQQ.js";import{I as b}from"./InvoiceFields-CIZnJ0Qt.js";function w(){const n=i.useSearch(),r=i.useParams(),u=m({from:i.fullPath}),a=x(p(r.invoiceId)).data,s=h(r.invoiceId),[o,l]=d.useState(n.notes??"");return d.useEffect(()=>{u({search:t=>({...t,notes:o||void 0}),replace:!0,params:!0})},[o]),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),t.stopPropagation();const c=new FormData(t.target);s.mutate({id:a.id,title:c.get("title"),body:c.get("body")})},className:"p-2 space-y-2",children:[e.jsx(b,{invoice:a,disabled:s.status==="pending"}),e.jsxs("div",{children:[e.jsxs(v,{from:i.fullPath,params:!0,search:t=>({...t,showNotes:t.showNotes?void 0:!0}),className:"text-blue-700",children:[n.showNotes?"Close Notes":"Show Notes"," "]}),n.showNotes?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"h-2"}),e.jsx("textarea",{value:o,onChange:t=>{l(t.target.value)},rows:5,className:"shadow w-full p-2 rounded",placeholder:"Write some notes here..."}),e.jsx("div",{className:"italic text-xs",children:"Notes are stored in the URL. Try copying the URL into a new tab!"})]})}):null]}),e.jsx("div",{children:e.jsx("button",{className:"bg-blue-500 rounded p-2 uppercase text-white font-black disabled:opacity-50",disabled:s.status==="pending",children:"Save"})}),s.variables?.id===a.id?e.jsx("div",{children:s.status==="success"?e.jsx("div",{className:"inline-block px-2 py-1 rounded bg-green-500 text-white animate-bounce [animation-iteration-count:2.5] [animation-duration:.3s]",children:"Saved!"}):s.status==="error"?e.jsx("div",{className:"inline-block px-2 py-1 rounded bg-red-500 text-white animate-bounce [animation-iteration-count:2.5] [animation-duration:.3s]",children:"Failed to save."}):null},s.submittedAt):null]},a.id)}export{w as component};
