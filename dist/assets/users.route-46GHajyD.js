import{c as f,d as u,e as h,r as n,j as s,L as y,M as j,S as v,O as g}from"./index-BQC43ji0.js";import{u as b}from"./useSuspenseQuery-DaXERWQQ.js";function S(){const c=f({from:u.fullPath}),{usersView:d}=u.useSearch(),i=b(h(u.useLoaderDeps())).data,a=d?.sortBy??"name",r=d?.filterBy,[o,x]=n.useState(r??"");n.useEffect(()=>{x(r??"")},[r]);const l=n.useMemo(()=>i?a?[...i].sort((e,t)=>e[a]>t[a]?1:-1):i:[],[i,a]),p=n.useMemo(()=>r?l.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())):l,[l,r]),m=e=>c({search:t=>({...t,usersView:{...t?.usersView??{},sortBy:e}}),replace:!0});return n.useEffect(()=>{c({search:e=>({...e,usersView:{...e?.usersView,filterBy:o||void 0}}),replace:!0})},[o]),s.jsxs("div",{className:"flex-1 flex",children:[s.jsxs("div",{className:"divide-y",children:[s.jsxs("div",{className:"py-2 px-3 flex gap-2 items-center bg-gray-100 dark:bg-gray-800",children:[s.jsx("div",{children:"Sort By:"}),s.jsx("select",{value:a,onChange:e=>m(e.target.value),className:"flex-1 border p-1 px-2 rounded",children:["name","id","email"].map(e=>s.jsx("option",{value:e,children:e},e))})]}),s.jsxs("div",{className:"py-2 px-3 flex gap-2 items-center bg-gray-100 dark:bg-gray-800",children:[s.jsx("div",{children:"Filter By:"}),s.jsx("input",{value:o,onChange:e=>x(e.target.value),placeholder:"Search Names...",className:"min-w-0 flex-1 border p-1 px-2 rounded"})]}),p?.map(e=>s.jsx("div",{children:s.jsx(y,{to:"/dashboard/users/user",search:{userId:e.id},className:"block py-2 px-3 text-blue-700",activeProps:{className:"font-bold"},children:s.jsxs("pre",{className:"text-sm",children:[e.name," ",s.jsx(j,{to:"/dashboard/users/user",search:{userId:e.id},pending:!0,children:t=>s.jsx(v,{show:!!t,wait:"delay-50"})})]})})},e.id))]}),s.jsx("div",{className:"flex-initial border-l",children:s.jsx(g,{})})]})}export{S as component};
