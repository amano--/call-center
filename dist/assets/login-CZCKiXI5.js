import{u as d,R as i,r as u,j as e}from"./index-BQC43ji0.js";function m(){const t=d(),{auth:n,status:o}=i.useRouteContext({select:({auth:s})=>({auth:s,status:s.status})}),a=i.useSearch(),[r,l]=u.useState(""),c=s=>{s.preventDefault(),n.login(r),t.invalidate()};return u.useLayoutEffect(()=>{o==="loggedIn"&&a.redirect&&t.history.push(a.redirect)},[o,a.redirect]),o==="loggedIn"?e.jsxs("div",{children:["Logged in as ",e.jsx("strong",{children:n.username}),e.jsx("div",{className:"h-2"}),e.jsx("button",{onClick:()=>{n.logout(),t.invalidate()},className:"text-sm bg-blue-500 text-white border inline-block py-1 px-2 rounded",children:"Log out"}),e.jsx("div",{className:"h-2"})]}):e.jsxs("div",{className:"p-2",children:[e.jsx("div",{children:"You must log in!"}),e.jsx("div",{className:"h-2"}),e.jsxs("form",{onSubmit:c,className:"flex gap-2",children:[e.jsx("input",{value:r,onChange:s=>l(s.target.value),placeholder:"Username",className:"border p-1 px-2 rounded"}),e.jsx("button",{type:"submit",className:"text-sm bg-blue-500 text-white border inline-block py-1 px-2 rounded",children:"Login"})]})]})}export{m as component};
